# 02 Frontend Behavior

## 全域行為與狀態
- 登入後固定顯示頂部功能列：登出、即時公告、出貨作業、收貨作業、退貨作業。
- 登入後預設進入「出貨作業」。
- 所有已登入頁面資料皆需依登入者「內部廠區」進行資料隔離顯示。
- 即時同步：狀態變更需在 < 3 秒內反映在畫面；狀態顏色更新視覺回饋 < 1 秒。
- 斷線提示：網路中斷時需明確提示；恢復後自動重連與同步（離線暫存的具體範圍/衝突規則未定義）。

## 響應式與可用性約束
- 裝置支援：手機 < 768px、平板 768-1024px（平板優先）、桌面 > 1024px。
- 觸控友善：所有可互動元素目標尺寸至少 44x44px。
- 基本無障礙性：鍵盤可操作、焦點指示清楚、必要處提供語意/標籤（例如狀態以文字或輔助標籤提供可讀資訊）。

## 狀態顏色系統（語義映射）
- 正常/成功：綠色 `#8eba34`
- 缺貨待料：藍色 `#3a9cd8`
- 通知未到/錯誤：紅色 `#f68480`

## 人員管理（登入/登出）
- 登入：輸入帳號密碼後送出；驗證失敗以燈箱提示「帳號密碼輸入錯誤」，並停留在登入頁。
- 忘記密碼：點擊後顯示燈箱提示文字（純顯示、不可編輯）；內容載入時間 < 1 秒。
- 登出：由頂部功能列觸發；登出後不可存取需登入頁面。

## 即時公告
- 公告列表：顯示已讀/未讀狀態；支援單筆已讀、單筆刪除。
- 篩選列：允許勾選列表項目；「全部已讀」與「全部刪除」需依目前篩選條件作用。
- 公告詳細：顯示日期、時間、標題、內容；支援刪除與返回列表。

## 出貨作業管理

### 出貨頁三區塊
- 篩選列：僅影響「未排車次列表」的顯示內容。
- 碼頭儀錶板：一碼頭一組；顯示規則與互動為核心。
- 未排車次列表：依登入者廠區與篩選條件顯示；以顏色標示狀態。

### 碼頭儀錶板顯示與互動
- 每個碼頭皆顯示碼頭名稱。
- 預設底色為綠色；依車輛狀態變更底色：綠/藍/紅。
- 未排車次狀態：碼頭區塊顯示下拉選單，供選擇可排入的車次。
- 下拉選單候選條件：配送日期為當天、任務起點內部廠區 = 登入者內部廠區、任務包含「送貨」配送單、且未完成出車/未取消。
- 已選定車次狀態：顯示車牌/車次與通知入口（喇叭 icon）；點擊可發送通知。
- 點擊碼頭（非通知入口）開啟車次詳細配送單燈箱。

### 車次詳細配送單燈箱（出貨）
- 遮罩不覆蓋整個頁面；按鈕需位於燈箱內最下方。
- 顯示基本資訊：上班時間、司機姓名、車號車次、路線別。
- 配送資訊可收合/展開；單一配送點可能含多位客戶配送單，需可各自收合/展開。
- 可操作狀態：取消、完成出車、缺貨待料、通知未到。

### 出貨狀態變更後的前台行為
- 完成出車/取消：該車輛不再顯示於碼頭儀錶板。
- 缺貨待料/通知未到：該車輛回到未排車次列表（並可再次被下拉選單選取）；碼頭/列表顏色依狀態更新。

## 收貨作業管理

### 收貨列表
- 顯示：依篩選條件列出任務內含「收貨」配送單的所有任務。
- 下貨狀態：預設「接貨中」；運務回報「回廠下貨」後，狀態更新為「回廠下貨」，並顯示車輛回報位置與時間。
- 下貨碼頭選擇：於「回廠下貨」狀態可選擇下貨碼頭；選項需自動排除已被選定為出貨或下貨的碼頭。
- 導航：車號在任務未完成時可點擊進入配送點總表；已完成後不可進入。
- 排序：先「回廠下貨」再「接貨中」；同狀態依回報時間由新到舊。

### 配送點總表
- 顯示任務內所有有「收貨」配送單的客戶/配送點資訊。
- 顯示收貨類型：入庫分貨/越庫作業。
- 點擊配送點可進入收貨明細。
- 簽名板：針對整趟任務提供簽名送出。
- 送出後：回到收貨列表，該任務收貨狀態由未完成改為已完成；已完成任務不可再次進入配送點總表。

### 收貨明細
- 進入後顯示進入時間並持續動態更新。
- 入庫分貨：顯示商品資訊（客戶簡稱、商品名稱、單據入數/件數/板位）；實收數量預設同單據入數，可修改；每商品可新增多組（實收數量+有效日期），可刪除但最少保留一組；每商品一則備註。
- 越庫作業：顯示商品資訊（客戶簡稱、商品名稱、起點單據板位、迄點單據板位）；可填寫實收板位與備註；每商品可新增多組（配送點/實收板位/配送日期/備註），可刪除但最少保留一組。

## 退貨作業管理
- 退貨單列表：顯示退貨單號/建立日期/原配送單號/客戶簡稱/退貨類型/狀態；可依篩選條件篩選。
- 操作：狀態「未完成」顯示編輯入口；狀態「已立單」顯示查看入口。
- 退貨單詳細：顯示完整退貨單資訊與退貨商品內容；依狀態切換可編輯/唯讀。

## 未定義/需釐清
- 離線暫存：哪些操作需暫存、暫存上限、恢復後的送出順序與衝突處理。
- 即時同步的 UI 呈現：同步中/失敗/重試的明確視覺規格與文案。
